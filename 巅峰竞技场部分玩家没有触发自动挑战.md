##时间
2022.12.20
#问题描述
接到线上玩家反馈，自己显示排名第一第二名，但却未晋级决赛。通过查询数数埋点发现，该玩家参与到了小组赛第二轮，但却没有任何一场该轮挑战记录。理论上玩家不手动挑战会触发自动挑战，必定会存在打满比赛的挑战记录，所以判断是自动挑战出现bug，通过排查相关代码发现，判定一组玩家全部挑战完成的条件存在问题，在还剩一名玩家未完成时已经判断全部完成。
**错误代码段：**
```csharp
foreach(var it in TrialCache.m_list)
{
	//该组已经完成战斗
	if (it.data.FinishRoleCount >= it.data.List.Count - 1)
	{
		finishCount++;
		continue;
	}

	......
                
 }
```

**修复代码段：**
```csharp
foreach(var it in TrialCache.m_list)
{
	//该组已经完成战斗
	if (it.data.FinishRoleCount >= it.data.List.Count)
	{
		finishCount++;
		continue;
	}

	......
                
 }
```
#处理结果
1.修复上述问题代码。下次版本更新。
2.通过查询埋点发现，存在38名玩家在小组赛第二轮出现上述问题，相关名单已经转交给策划以及运营，在玩家问询时给玩家补偿。
#问题反思
1.从代码层面来说，这是一个很浅显的判断问题。但却导致了比较大的问题，有实力的玩家可能会无法晋级下轮比赛。
2.竞技场尤其是巅峰竞技场逻辑以及功能繁多复杂，而且十分依赖于大量玩家数据，测试没办法测试全面。大部分功能问题比较考验程序严谨性。所以在开发竞技场功能时，做完需要对整体功能代码进行自我check以及梳理。保证不会出现重大问题以及事故。
3.在开发是要注意功能拆分，以及做好各个模块的数据校验。这样能尽量避免出现重大问题，在排查问题时能够尽快定位。